---

- name: Bootstrap | Debian | Install base packages
  apt:
    name: ['python', 'python-pip', 'python3', 'python3-pip', 'sudo']
    state: present

- name: Bootstrap | Debian | Install tools
  apt:
    name: ['ncdu', 'net-tools', 'dnsutils']
    state: present

- name: Bootstrap | Debian | Get current username
  include_role:
    name: _shared
    tasks_from: set_current_user

- name: Bootstrap | Debian | Deploying ssh config
  template:
    src: 'templates/etc/ssh/sshd_config.j2'
    dest: '/etc/ssh/sshd_config'
    owner: 'root'
    group: 'root'
    mode: 0644
  notify: 'restart_sshd'

- name: Bootstrap | Debian | Deploying ssh post-login banner
  copy:
    src: 'templates/etc/ssh/banner.txt'
    dest: '/etc/ssh/banner.txt'
    owner: 'root'
    group: 'root'
    mode: 0644

- name: Bootstrap | Debian | Deploying ssh pre-login banner
  copy:
    src: 'templates/etc/motd.j2'
    dest: '/etc/motd'
    owner: 'root'
    group: 'root'
    mode: 0644
